<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSDoc: Source: src/flood-fill.js</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link
      type="text/css"
      rel="stylesheet"
      href="styles/prettify-tomorrow.css"
    />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
  </head>

  <body>
    <div id="main">
      <h1 class="page-title">Source: src/flood-fill.js</h1>

      <section>
        <article>
          <pre class="prettyprint source linenums"><code>/**
 * Flood fill algorithm implementation for determining available space.
 * @module floodFill
 */

/**
 * Performs flood fill to count accessible space from a starting position.
 * @param {Object} board - Game board information.
 * @param {Object} start - Starting position.
 * @param {Array&lt;Array>} snakeBodies - Array of snake body segments.
 * @returns {number} The count of accessible spaces.
 */
export function floodFill(board, start, snakeBodies) {
  const queue = [start];
  const visited = new Set();
  const key = (x, y) => `${x},${y}`;
  const width = board.width;
  const height = board.height;

  const isObstacle = (x, y) => {
    for (const snake of snakeBodies) {
      if (snake.some(part => part.x === x &amp;&amp; part.y === y)) return true;
    }
    return false;
  };

  let count = 0;

  while (queue.length > 0) {
    const { x, y } = queue.shift();
    const id = key(x, y);

    if (
      x &lt; 0 || y &lt; 0 || x >= width || y >= height ||
      visited.has(id) || isObstacle(x, y)
    ) {
      continue;
    }

    visited.add(id);
    count++;

    queue.push({ x: x + 1, y });
    queue.push({ x: x - 1, y });
    queue.push({ x, y: y + 1 });
    queue.push({ x, y: y - 1 });
  }

  return count;
}

/**
 * Determines the best move based on available space.
 * @param {Object} myHead - Current snake head position.
 * @param {Object} isMoveSafe - Object tracking safe moves.
 * @param {Object} board - Game board information.
 * @param {Array&lt;Array>} snakeBodies - Array of snake body segments.
 * @returns {string|null} The best direction to move or null if no safe moves.
 */
export function bestMove(myHead, isMoveSafe, board, snakeBodies) {
  const directions = {
    up: { x: myHead.x, y: myHead.y + 1 },
    down: { x: myHead.x, y: myHead.y - 1 },
    left: { x: myHead.x - 1, y: myHead.y },
    right: { x: myHead.x + 1, y: myHead.y },
  };

  let best = null;
  let maxArea = -1;

  for (const dir in directions) {
    if (!isMoveSafe[dir]) continue;
    const space = floodFill(board, directions[dir], snakeBodies);
    if (space > maxArea) {
      best = dir;
      maxArea = space;
    }
  }

  return best;
}
</code></pre>
        </article>
      </section>
    </div>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Modules</h3>
      <ul>
        <li><a href="module-aStar.html">aStar</a></li>
        <li><a href="module-floodFill.html">floodFill</a></li>
        <li><a href="module-foodTargeting.html">foodTargeting</a></li>
        <li><a href="module-headToHead.html">headToHead</a></li>
        <li><a href="module-huntSmallerSnakes.html">huntSmallerSnakes</a></li>
        <li><a href="module-index.html">index</a></li>
        <li>
          <a href="module-otherSnakesCollision.html">otherSnakesCollision</a>
        </li>
        <li><a href="module-selfCollision.html">selfCollision</a></li>
        <li><a href="module-tailCollision.html">tailCollision</a></li>
        <li><a href="module-wallCollision.html">wallCollision</a></li>
      </ul>
    </nav>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Jun 16
      2025 22:46:04 GMT+0300 (Eastern European Summer Time)
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
